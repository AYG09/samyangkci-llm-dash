# Dash용 프롬프트 템플릿 및 생성 함수 (Streamlit 코드 이식)

# 1. 기본 프롬프트 템플릿
DEFAULT_PROMPT = """
아래는 면접자의 다양한 평가 자료입니다. 각 자료를 종합적으로 분석하여, 삼양KCI의 최신 인재상과 가치체계(객관성, 전문성, 탐구심, 도전정신, 책임의식, 윤리, 신뢰, 소통, 협력 등)에 비추어 아래 JSON 구조에 맞춰 심층 분석 결과를 작성해 주세요.

[이력서]
{이력서 내용}

[1차 실무 면접평가표]
{{1차 면접평가표 내용}}

[2차 면접 녹취록]
{{2차 면접녹취록 내용}}

[평판보고서]
{{평판보고서 내용}}

[인성평가 자료]
{{인성평가 내용}}

[BIG5 성격유형 검사표]
{{BIG5 검사 내용}}

[분석 결과 JSON 형식]
{
  "name": "지원자 이름",
  "position": "지원 포지션",
  "submission_date": "YYYY-MM-DD",
  "digital_literacy": "Digital 역량 수준 (1-5점 척도)",
  "esg_understanding": "ESG 이해도 수준 (1-5점 척도)",
  "esg_practical_examples": "ESG 원칙을 실제 업무에 적용한 구체적 사례. 없으면 '경험 없음' 명시.",
  "wb_self_acceptance": "심리적 안녕감 - 자기수용 (1-5점 척도)",
  "wb_personal_growth": "심리적 안녕감 - 개인적 성장 (1-5점 척도)",
  "wb_purpose_in_life": "심리적 안녕감 - 삶의 목적 (1-5점 척도)",
  "wb_positive_relations": "심리적 안녕감 - 긍정적 대인관계 (1-5점 척도)",
  "wb_environmental_mastery": "심리적 안녕감 - 환경 지배력 (1-5점 척도)",
  "wb_autonomy": "심리적 안녕감 - 자율성 (1-5점 척도)",
  "tomo_primary_type": "TOMO 인재유형 - 주 유형",
  "tomo_score": "TOMO 인재유형 - 해당 유형 점수",
  "we_vigor": "직무열의 - 활력 (1-5점 척도)",
  "we_dedication": "직무열의 - 헌신 (1-5점 척도)",
  "we_absorption": "직무열의 - 몰입 (1-5점 척도)",
  "growth_potential_matrix": {
    "wb_personal_growth": "개인적 성장 점수",
    "digital_literacy": "Digital 역량 점수",
    "interpretation": "성장 잠재력 매트릭스 상 위치 및 해석 (예: 우상단(Star): 현재 역량과 성장 욕구 모두 높음)"
  },
  "analysis_summary": "핵심 역량 및 특이사항 요약",
  "risk_factors": "리스크 요인 및 보완점",
  "cultural_fit_summary": "삼양KCI 최신 가치체계와의 적합성 종합 평가",
  "overall_score": "종합 점수 (5점 만점)",
  "hiring_recommendation": "채용 추천 여부 (적극 추천, 추천, 고려, 비추천)",
  "executive_summary": "임원용 요약 보고서 내용 (핵심 강점, 잠재 리스크, 성장 가능성 위주로 2~3 문장 요약)",
  "hr_report": "HR 담당자용 상세 보고서 내용 (데이터 기반의 상세 역량 분석, 조직 문화 적합성, 잠재적 리스크에 대한 구체적 관리 방안 포함)",
  "general_report": "종합 분석 보고서 내용 (모든 평가 항목을 종합한 상세 분석 결과)"
}
"""

# 2. 맞춤형 프롬프트 생성 함수 (Streamlit/기존 로직 이식)
def generate_custom_prompt(
    name: str,
    org: str,
    position: str,
    date: str,
    salary: str,
    career: str,
    extra_instruction: str = ""
) -> str:
    """최신 삼양KCI 면접 분석 프롬프트 생성 (코드블록/JSON/마크업 금지, 자연어 항목별 분석)"""
    prompt = f"""
[면접자 정보]
- 이름: {name}
- 지원조직: {org}
- 지원 포지션: {position}
- 지원직급: (입력값/자료기준 명확히 표기)
- 경력: {career}
- 희망연봉: {salary}
- 지원일자: {date}

[최종 조정된 면접자 정보]
- 아래 항목별로 업로드된 자료(이력서, 경력기술서 등)에서 추출한 정보를 제시하세요. 자료에서 찾을 수 없는 항목은 '자료에서 확인 불가'로 표기하고, 사용자가 입력한 값과 다르면 '입력값: OOO / 자료기준: XXX'로 명확히 표기하세요.
- 이름:
- 지원직급:
- 지원조직:
- 경력(근속년수):
- 학력:
- 주요경력/자격:
- 희망연봉:

[중요]
- 아래 모든 항목별로 (1) 점수(1~5점 등), (2) 자연어 분석(근거 포함), (3) 점수 산출근거, (4) 신뢰도(및 산출근거)를 반드시 모두 제시하세요.
- 임원용 핵심 INSIGHT 5가지, HR담당자용 주요 포인트 5가지는 별도 카테고리로 구분하고, 각 항목별로 [자연어 분석/근거/신뢰도]를 반드시 포함하세요.
- 예시의 항목 구조, 순서, 필드명을 그대로 유지하세요.
- 코드블록, 마크업, JSON 등은 절대 포함하지 마세요.

[자료별 핵심 결과 요약]
- 면접 녹취록을 제외한 각 업로드 자료(이력서, 실무면접평가표, 평판보고서, 인성평가, BIG5, 포트폴리오 등)에 대해, 해당 자료에서 반드시 확인해야 할 핵심 결과, 특이점, 리스크, 강점 등을 1~2줄로 요약 제시하세요.
- 이 요약은 1차 점검용이며, 최종 평가는 반드시 모든 자료와 면접 녹취록을 종합적으로 분석하여 제시하세요.

[면접자 정보 및 자료 점검]
- 위 입력된 면접자 정보와 업로드된 자료를 먼저 점검·분석하고, 부족하거나 의문점이 있으면 추가로 보완·질문·확인하세요.
- 업로드된 자료 내역은 반드시 모두 분석에 활용해야 하며, 자료별로 어떤 근거를 활용했는지 명확히 밝히세요.

[업로드 자료 내역]
- 이력서
- 1차 실무 면접평가표
- 2차 면접 녹취록
- 평판보고서
- 인성평가 자료
- BIG5 성격유형 검사표
- 포트폴리오

[삼양KCI 최신 가치체계(2025년판) 전문]
Purpose 우리의 존재 목적
생활의 잠재력을 깨웁니다. 인류의 미래를 바꿉니다.
Beyond Life's Potential, Innovate the Future.

Vision 우리가 되고자 하는 미래상
스페셜티 소재와 솔루션을 통해 인류의 미래를 바꾸는 글로벌 파트너
Global partner changing the future of humanity through specialty materials and solutions.

Live on Purpose 삼양 가치
인재상과 행동규범
객관성과 전문성을 바탕으로 한 판단력
관행을 당연시하지 않는 새로운 시각과 탐구심
실패를 두려워하지 않는 용기와 도전정신
끝까지 완수하는 책임의식
윤리와 원칙을 바탕으로 한 신뢰
공동의 Purpose를 향한 소통과 협력

의사결정 원칙
미래지향적 가치 창출
소비자 안전의 절대적 추구
최종 소비자에 집중한 준비와 제안
리더십을 구축할 수 있는 분야에 자원 집중
창의적이고 효율적인 시간 운용
새로운 가능성을 위한 혁신적 비용 절감

Heritage 창업정신
인간을 존중하고 사회에 기여하는 개척자 정신
The Pioneer spirit with respect for humanity and in service to society.

Understanding of SAMYANG 삼양의 의미
분수를 지켜 복을 기르고, 마음을 너그럽게 하여 기를 기르며, 낭비를 삼가하여 재산을 기른다.

핵심 사업 영역
Health & Wellness, Advanced Materials & Solutions.

고객 가지 제언
다음 세대의 더 건강하고, 편리한 삶을 위한 혁신 솔루션

- 아래 분석 항목 중 삼양KCI의 문화/가치/인재상/행동규범/의사결정 원칙 등은 반드시 위 가치체계 전문을 참고하여 평가하세요.
- 단, 산업/미래사업/직무역량 등은 첨부 자료 외에도 다양한 외부 최신 자료(논문, 산업리포트, 뉴스 등)를 참고하여 분석하세요.

각 자료를 종합적으로 분석하여, 아래 제시된 삼양KCI의 **최신 가치체계**(2025년 기준)에 비추어 다각적·다층적·다학제적 분석 결과를 작성해 주세요.

[분석 항목]
(1) 캐롤리프 모델 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(2) 린지맥그리거·닐도시 모델 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(3) 윌마샤우펠리 모델 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(4) 에드워드 데시(자기결정성)이론 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(5) 프레데릭 허츠버그 동기-위생이론 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(6) 번아웃(소진) 위험 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(7) 기타(삼양KCI 가치체계에 적합한 심리/성격/감정상태 모델) 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(8) 현재 사업과의 역량 매칭 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(9) 미래 사업 활용 가능성 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(10) 조직적합성 평가 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(11) 성장잠재력 해석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(12) 리스크 및 보완점 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(13) 심층 동기/가치관 분석 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(14) 커뮤니케이션/대인관계 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(15) 윤리/책임감/리더십 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(16) 종합 평가 및 추천 : [점수] / [자연어 분석] / [산출근거] / [신뢰도]
(17) 전체 분석 신뢰도 : [점수] / [신뢰도 산출근거]

[임원용 핵심 INSIGHT]
(1) 조직/사업 전략과의 시너지 가능성 : [자연어 분석/근거/신뢰도]
(2) 핵심 역량 및 차별화 포인트 : [자연어 분석/근거/신뢰도]
(3) 리더십/주도성/의사결정 스타일 : [자연어 분석/근거/신뢰도]
(4) 위험요인 및 경영적 리스크 : [자연어 분석/근거/신뢰도]
(5) 조직문화 적합성 및 장기적 성장성 : [자연어 분석/근거/신뢰도]

[HR담당자용 주요 포인트]
(1) 입사 후 온보딩/적응 예상 이슈 : [자연어 분석/근거/신뢰도]
(2) 보상/동기부여 설계 포인트 : [자연어 분석/근거/신뢰도]
(3) 조직 내 배치/활용 추천 : [자연어 분석/근거/신뢰도]
(4) 법적/윤리적/평판 리스크 : [자연어 분석/근거/신뢰도]
(5) 개인별 성장/경력개발 지원 포인트 : [자연어 분석/근거/신뢰도]

[출력 예시]
(1) 캐롤리프 모델 분석
- 점수: 4.5
- 분석: 지원자는 자기주도성과 회복탄력성이 높아 캐롤리프 모델 기준에서 우수한 인재로 평가됨. (근거: 면접 답변 중 ~, 이력서 ~)
- 점수 산출근거: 자기주도적 경험 사례 3건, 실패 극복 경험 등
- 신뢰도: 4.0 (산출근거: 답변 일관성, 구체적 사례 다수)

... (이하 동일)

임원용/HR담당자용 항목도 위와 같은 형식으로 작성

{extra_instruction.strip() if extra_instruction.strip() else ''}
"""
    return prompt
